{% extends "layout.html" %}
{% set title = "Login" %}
{% set year = 2025 %}

{% block content %}
<style>
    .input-textui {
        background-color: #93c9b7;
        width: 100%;
        height: 40px;
        padding: 10px;
        border: 2px solid white;
        border-radius: 5px;
    }

        .input-textui:focus {
            color: #32325d;
            background-color: #93c9b7;
            outline-color: rgb(147,201,183);
            box-shadow: -3px -3px 15px rgb(147,201,183);
            transition: 0.1s;
            transition-property: box-shadow;
        }

    button {
        font-size: 18px;
        display: inline-block;
        outline: 0;
        border: 0;
        cursor: pointer;
        will-change: box-shadow,transform;
        background: radial-gradient( 100% 100% at 100% 0%, #89E5FF 0%, #5468FF 100% );
        box-shadow: 0px 0.01em 0.01em rgb(45 35 66 / 40%), 0px 0.3em 0.7em -0.01em rgb(45 35 66 / 30%), inset 0px -0.01em 0px rgb(58 65 111 / 50%);
        padding: 0 2em;
        border-radius: 0.3em;
        color: #fff;
        width: 100%;
        height: 2.6em;
        text-shadow: 0 1px 0 rgb(0 0 0 / 40%);
        transition: box-shadow 0.15s ease, transform 0.15s ease;
    }

        button:hover {
            box-shadow: 0px 0.1em 0.2em rgb(45 35 66 / 40%), 0px 0.4em 0.7em -0.1em rgb(45 35 66 / 30%), inset 0px -0.1em 0px #3c4fe0;
            transform: translateY(-0.1em);
        }

        button:active {
            box-shadow: inset 0px 0.1em 0.6em #3c4fe0;
            transform: translateY(0em);
        }
</style>

<div class="flex items-center justify-center min-h-screen bg-[#003153]">
    <div class="relative w-full max-w-md bg-white/10 backdrop-blur-lg p-8 rounded-xl shadow-lg border border-white/20">
        <h2 class="text-3xl font-extrabold text-white text-center">Welcome Back</h2>
        <p class="text-gray-300 text-center mt-2">Login to your account</p>

        {% if error %}
        <div class="mt-4 p-3 text-sm text-red-400 bg-red-800/20 rounded-lg border border-red-600">
            {{ error }}
        </div>
        {% endif %}

        <form method="POST" action="{{ url_for('login') }}" class="mt-6 space-y-4">
            <div class="relative">
                <label for="uName" class="block text-sm font-medium text-gray-300">Username</label>
                <input type="text" id="uName" name="uName"
                       class="input-textui text-gray-700 placeholder-gray-500"
                       placeholder="Enter your username" required>
            </div>

            <div class="relative">
                <label for="pWord" class="block text-sm font-medium text-gray-300">Password</label>
                <input type="password" id="pWord" name="pWord"
                       class="input-textui text-gray-700 placeholder-gray-500"
                       placeholder="Enter your password" required>
            </div>

            <button type="submit" class="button">
                <span class="text">Login</span>
            </button>
        </form>

        <p class="mt-4 text-center text-gray-400">
            Don't have an account?
            <a href="{{ url_for('register') }}" class="text-blue-400 hover:text-blue-500 transition">Register</a>
        </p>
    </div>
</div>
<!-- Add this to your register route in Flask after successful registration but before redirecting -->
{% if success_message %}
<script>
    // Set up the notification to show on page load
    document.addEventListener('DOMContentLoaded', function() {
        // Create success notification
        showRegistrationNotification("{{ firstName }}", "{{ lastName }}");
    });

    function showRegistrationNotification(firstName, lastName) {
        // Create notification container
        const notification = document.createElement('div');
        notification.className = 'fixed top-4 right-4 max-w-md bg-green-50 border-l-4 border-green-500 rounded-lg shadow-lg z-50 transform transition-all duration-500 ease-out';
        notification.style.opacity = '0';
        notification.style.transform = 'translateX(100%)';

        // Build notification content
        notification.innerHTML = `
            <div class="p-4 relative">
                <div class="flex items-start">
                    <div class="flex-shrink-0">
                        <svg class="h-5 w-5 text-green-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                        </svg>
                    </div>
                    <div class="ml-3">
                        <h3 class="text-sm font-medium text-green-800">Registration Submitted</h3>
                        <div class="mt-1 text-sm text-green-700">
                            <p>The account for <span class="font-semibold">${lastName}, ${firstName}</span> has been submitted for approval.</p>
                        </div>
                    </div>
                </div>

                <!-- Progress bar timer -->
                <div class="w-full bg-gray-200 rounded-full h-1.5 mt-3 overflow-hidden">
                    <div class="bg-green-600 h-1.5 rounded-full timer-bar" style="width: 100%"></div>
                </div>
            </div>
        `;

        // Add to DOM
        document.body.appendChild(notification);

        // Animate in
        setTimeout(() => {
            notification.style.opacity = '1';
            notification.style.transform = 'translateX(0)';
        }, 100);

        // Start the timer bar animation
        const timerBar = notification.querySelector('.timer-bar');
        timerBar.style.transition = 'width 3s linear';

        setTimeout(() => {
            timerBar.style.width = '0%';
        }, 100);

        // Remove after 3 seconds
        setTimeout(() => {
            notification.style.opacity = '0';
            notification.style.transform = 'translateX(100%)';

            // Remove from DOM after fade out
            setTimeout(() => {
                notification.remove();
            }, 500);
        }, 3000);
    }
</script>
{% endif %}
{% endblock %}
